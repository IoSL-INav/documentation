%\documentclass[9pt,handout]{beamer}
\documentclass[11pt]{beamer}

%\usepackage[style=alphabetic]{biblatex}

%\usepackage{pgfpages}
%\setbeameroption{show notes on second screen=left}

% Copyright 2004 by Till Tantau <tantau@users.sourceforge.net>.
%
% In principle, this file can be redistributed and/or modified under
% the terms of the GNU Public License, version 2.
%
% However, this file is supposed to be a template to be modified
% for your own needs. For this reason, if you use this file as a
% template and not specifically distribute it as part of a another
% package/program, I grant the extra permission to freely copy and
% modify this file as you see fit and even to delete this copyright
% notice.
%
% Modified by Tobias G. Pfeiffer <tobias.pfeiffer@math.fu-berlin.de>
% to show usage of some features specific to the FU Berlin template.

% altered by someone at TU. fiddled with and fixed some things by
% Nicolas Werner (some UTF-8 fix, biblatex-biber intro before toc,
% other stuff I can't remember)

% remove this line and the "ucs" option to the documentclass when your editor is not utf8-capable
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}   % to make utf-8 input possible
\usepackage[english]{babel}     % hyphenation etc., alternatively use 'german' as parameter
\usepackage{verbatim}           % comments and stuff
\usepackage[right]{eurosym}
\usepackage{booktabs}
\usepackage{tikz}
\newcommand{\todo}[1]{\raisebox{0pt}{\parbox{0pt}{\begin{large}\colorbox{red}{todo: #1}\end{large} \hspace*{0.05cm}}}}

\usepackage{blindtext}
\usepackage[fixlanguage]{babelbib}
\selectbiblanguage{english}

% for fix positioning
\usepackage[absolute,overlay]{textpos}
  \setlength{\TPHorizModule}{1mm}
  \setlength{\TPVertModule}{1mm}
% this allows this stuff below
%  \begin{textblock}{7}(30,5)
%      \includegraphics[width=\textwidth]{tech-stack-android}
%  \end{textblock}

% ``English''  <>  "`Deutsch"'
\newcommand{\germanQuote}[1]{\glqq#1\grqq}
\newcommand{\englishQuote}[1]{``#1''}
% in Überschriften kann es sein,
% dass man danach $\;$
% setzen muss, damit
% die Abstände stimmen.....
% in Sections ist das aber illegal
% deswegen:
% \texorpdfstring{\germanQuote{Text} $\;$blah}{\germanQuote{Text} blah}

%\addbibresource{references.bib}
\bibliographystyle{alpha}
%\bibliography{references}

\include{tu-beamer-template}  % THIS is the line that includes the TU template!
\input{beamer_table_of_content}

\setbeamertemplate{caption}[numbered]
%\captionsetup{labelformat=simple}
%\setbeamerfont{caption}{size=\TINY}

\usepackage{arev,t1enc,textcomp} % looks nicer than the standard sans-serif font
% if you experience problems, comment out the line above and change
% the documentclass option "9pt" to "10pt"
\usepackage{caption}

\usepackage{xpatch}
\xpatchcmd{\itemize}
  {\def\makelabel}
  {\setlength{\itemsep}{3ex}\def\makelabel}
  {}
  {}


% image to be shown on the title page (without file extension, should be pdf or png)

\titleimage{img/snet_logo}

\title{Internet of Services Lab - Indoor Navigation}

\subtitle{\small{Indoor Navigation in the TU-Mensa}}

\author[Oldenburg, Hechenberger, Meznarič, Lukau]{{Lennart Oldenburg, Andreas Hechenberger, Jan Meznarič, Eridy Lukau}}

\institute[TU Berlin]{Department of Telecommunication Systems Service-centric Networking
\\ Technische Universität Berlin}

\date[WS 2015/2016]{WS 2015/2016}

\subject{SNET IoSL Project -- WS 2015/2016}

\renewcommand{\footlinetext}{\insertshortinstitute, \insertshorttitle, \insertshortdate}

\newcounter{currentOutline}

\graphicspath{{./img/}}

\setbeamerfont{caption name}{size=\huge}

\setbeamertemplate{blocks}[rounded][shadow=false] % pdfpc fucks up the shadows, can be true for other viewers

\setbeamertemplate{footline}[text line]{%
    %\parbox{0pt}{\vspace*{-20pt}\hspace*{-23pt}\color{tu-red}\rule{1.2\paperwidth}{0.4pt}}
    \parbox{\linewidth}{%
        \color{text-grey}{%
            \vspace*{-10pt}%
            %WS 2015/2016%
            %\hfill%
            \insertsection%
            \hfill%
            \parbox{0pt}{%
                \vspace*{-3pt}\hspace*{-90pt}%
                \includegraphics[width=0.1\textwidth]{t-labs_logo}%
                \includegraphics[width=0.15\textwidth]{snet_logo_long}%
                \hspace{2ex}%
            }\insertpagenumber%
        }%
    }%
}
%\setbeamertemplate{navigation symbols bibliography entry title}{}
\setbeamertemplate{navigation symbols}{}

%fuer umrandeten text

\usepackage[framemethod=TikZ]{mdframed}
\usetikzlibrary{shadows}
\usetikzlibrary{positioning}
\usepackage{environ}
\usepackage{varwidth}
%\usepackage{showframe}

\newlength{\MyMdframedWidthTweak}%
\NewEnviron{bubble}[1][]{%
    \setlength{\MyMdframedWidthTweak}{\dimexpr%
        +\mdflength{innerleftmargin}
        +\mdflength{innerrightmargin}
        +\mdflength{leftmargin}
        +\mdflength{rightmargin}
        }%
    \savebox0{%
        \begin{varwidth}{\dimexpr\linewidth-\MyMdframedWidthTweak\relax}%
            \BODY
        \end{varwidth}%
    }%
    \begin{mdframed}[
        backgroundcolor=lightgray,
        shadow=true,
        shadowsize=4pt,
        roundcorner=5pt,
        userdefinedwidth=\dimexpr\wd0+\MyMdframedWidthTweak\relax,
        #1]
        \usebox0
    \end{mdframed}
}

\usepackage{fancybox}


\begin{document}

\begin{frame}[plain]
    \titlepage
\end{frame}


\stepcounter{currentOutline} % currentOutline = currentOutline + 1
% \setcounter{currentOutline}{value}
% \addtocounter{currentOutline}{value}


% Section: group of navigation bubbles
% Subsection: subgroup of navigation bubbles; black outline instead of grey

\section{Problem scenario}

\begin{frame}{Use case}

	\vspace{1cm}

    \begin{center}

        \includegraphics[width=.5\textwidth]{mensa}
        \includegraphics[width=.5\textwidth]{Bibliothek}

    \end{center}

	\vspace{1cm}

    \tiny{Source left: \url{http://www2.studentenwerk-berlin.de/uploads/pic_untenvonoben_737_full.jpg}}\\
    \tiny{Source right: \url{http://www.berlin-studis.de/images/stories/TU-Universitaetsbibliothek.jpg}}

\end{frame}

\begin{frame}{Use case}

	\begin{center}

        \includegraphics[width=\textwidth]{mensa-floor-plan-people-moving}

    \end{center}

\end{frame}

\begin{frame}{App idea}

    \begin{center}

        \vspace*{-14pt}\includegraphics[width=0.8\textwidth]{navitablet}

    \end{center}

\end{frame}

\begin{frame}{Requirements}

    \begin{itemize}

      \item Everyone has a smartphone
    	\item Participants have a TUB account (Edugain account)
    	\item For manual pin-pointing: WiFi is available
    	\item Minimal interaction, easy to use

    \end{itemize}

\end{frame}

\begin{frame}{Functionalities}

  \begin{itemize}
    \item User opens app and gets a login view for university account
    \item Add friends
    \item Share location via manual pin-pointing
    \item Share location automatically
    \item See shared locations of friends
  \end{itemize}

  % probably here some screenshots? or later in our approach?

\end{frame}

\section{Technology overview}

\begin{frame}{Possible localization techniques}

  \begin{columns}[c]

    \begin{column}{0.2\textwidth}
      \includegraphics[width=\textwidth]{wifi-symbol}
    \end{column}

    \hfill

    \begin{column}{0.8\textwidth}

      \includegraphics[width=0.05\textwidth]{plus} Works all over the campus out of the box\\
      \includegraphics[width=0.05\textwidth]{minus} No latitude \& longitude in mensa \& library

    \end{column}

  \end{columns}

  \pause

  \hrulefill

  \begin{columns}[c]

    \begin{column}{0.2\textwidth}
      \includegraphics[width=\textwidth]{beacon-symbol}
    \end{column}

    \hfill

    \begin{column}{0.8\textwidth}

      \includegraphics[width=0.05\textwidth]{plus} Precise location, automation possible\\
      \includegraphics[width=0.05\textwidth]{minus} Extra hardware in hotspots (beacons)

    \end{column}

  \end{columns}

  \pause

  \hrulefill

  \begin{columns}[c]

    \begin{column}{0.2\textwidth}
      \includegraphics[width=\textwidth]{location-symbol}
    \end{column}

    \hfill

    \begin{column}{0.8\textwidth}

      \includegraphics[width=0.05\textwidth]{plus} Most precise technique, privacy friendly\\
      \includegraphics[width=0.05\textwidth]{minus} User interaction needed

    \end{column}

  \end{columns}

\end{frame}

\begin{frame}{Technologic decisions}

  \begin{center}
    % technology big picture
    \includegraphics[width=0.8\textwidth]{tech-stack-big-picture}
  \end{center}

  %\begin{itemize}
  %  \item Cyclone-project as federation provider
  %  \item Android App, IOS App
  %  \item Backend is written in Node.js (supervisors)
  %\end{itemize}

\end{frame}




\begin{frame}{Indoor Map ~~~\raisebox{-10pt}[0pt][0pt]{\includegraphics[width=0.08\textwidth]{tech-stack-apple}}}

\framesubtitle{Subtitles can be in lowercase if they are full sentences.}
Map material:

  \begin{columns}[T]
  \begin{column}{.6\textwidth}
  \begin{itemize}
    \item Got Map Materialfiles from Studentenwerk and Tubit
    \item Preferable files: SVG, PDF (scalable)
  \end{itemize}
  \end{column}
  \begin{column}{.4\textwidth}
  \includegraphics[scale=0.25]{mapfirststep}
  \end{column}
\end{columns}

\end{frame}




\begin{frame}{Indoor Map ~~~\raisebox{-10pt}[0pt][0pt]{\includegraphics[width=0.08\textwidth]{tech-stack-apple}}}

\framesubtitle{Subtitles can be in lowercase if they are full sentences.}
Overlay Map material:

  \begin{columns}[T]
  \begin{column}{.6\textwidth}
  \begin{itemize}
    \item Convert (Long/Lat) into (X/Y) coordinates
    \item Define Anchor Points to Realworld Coordinates (Google Maps)
    \item Add File as Overlay on top of the Map
  \end{itemize}
  \end{column}
  \begin{column}{.4\textwidth}
  \includegraphics[scale=0.25]{mapfirststep}
  \end{column}
\end{columns}

\end{frame}




\begin{frame}{Indoor Map ~~~\raisebox{-10pt}[0pt][0pt]{\includegraphics[width=0.08\textwidth]{tech-stack-apple}}}

\framesubtitle{Subtitles can be in lowercase if they are full sentences.}
Overlay Map material:

  \begin{columns}[T]
  \begin{column}{.6\textwidth}
  \begin{itemize}
    \item Convert (Long/Lat) into (X/Y) coordinates
    \item Define Anchor Points to Realworld Coordinates (Google Maps)
    \item Add File as Overlay on top of the Map
  \end{itemize}
  \end{column}
  \begin{column}{.4\textwidth}
  \includegraphics[scale=0.25]{mapsecondstep}
  \end{column}
\end{columns}

\end{frame}





\begin{frame}{Indoor Map ~~~\raisebox{-10pt}[0pt][0pt]{\includegraphics[width=0.08\textwidth]{tech-stack-apple}}}

\framesubtitle{Subtitles can be in lowercase if they are full sentences.}
Overlay Map material:

  \begin{columns}[T]
  \begin{column}{.6\textwidth}
  \begin{itemize}
    \item With some effort on the Frameworks
    \item Achieved: A lossless scale/zoom of the Map
    \item Acurate mapping of points to coordinates
  \end{itemize}
  \end{column}
  \begin{column}{.4\textwidth}
  \includegraphics[scale=0.25]{mapisready}
  \end{column}
\end{columns}

\end{frame}




\begin{frame}{Indoor Map ~~~\raisebox{-10pt}[0pt][0pt]{\includegraphics[width=0.08\textwidth]{tech-stack-apple}}}

\framesubtitle{Subtitles can be in lowercase if they are full sentences.}
Overlay Map material:

  \begin{columns}[T]
  \begin{column}{.6\textwidth}
  \begin{itemize}
    \item Enables to add annotations precisely to a position on the map
    \item Cash Register, Foodstands, Stairs and so on...
  \end{itemize}
  \end{column}
  \begin{column}{.4\textwidth}
  \includegraphics[scale=0.25]{mapmensainfo}
  \end{column}
\end{columns}

\end{frame}




\begin{frame}{Indoor Map ~~~\raisebox{-10pt}[0pt][0pt]{\includegraphics[width=0.08\textwidth]{tech-stack-apple}}}

\framesubtitle{Subtitles can be in lowercase if they are full sentences.}
Overlay Map material:

  \begin{columns}[T]
  \begin{column}{.6\textwidth}
  \begin{itemize}
    \item New implemented sacling with zoomlevel right into a table
  \end{itemize}
  \end{column}
  \begin{column}{.4\textwidth}
  \includegraphics[scale=0.25]{mapzoomlevel}
  \end{column}
\end{columns}

\end{frame}




\begin{frame}{Indoor Positioning:~~~\raisebox{-10pt}[0pt][0pt]{\includegraphics[width=0.08\textwidth]{tech-stack-apple}}}

\framesubtitle{Subtitles can be in lowercase if they are full sentences.}
Automatic Pin Pointing:

  \begin{columns}[T]
  \begin{column}{.6\textwidth}
  \begin{itemize}
  \item  \textbf{TUBIT MSE API} \\ 
provides floor Information \\
no coordinates

  \item \textbf{Apple Indoor Framework} \\ 
Wifi Indoor signal strength \\
provides real coordinates, \\
no floor information \\ 


  
  \end{itemize}
  \end{column}
  \begin{column}{.4\textwidth}
  \includegraphics[scale=0.25]{applesignalweak}
  \end{column}
\end{columns}

\end{frame}

\begin{frame}{Indoor Positioning:~~~\raisebox{-10pt}[0pt][0pt]{\includegraphics[width=0.08\textwidth]{tech-stack-apple}}}

\framesubtitle{Subtitles can be in lowercase if they are full sentences.}
Automatic Pin Pointing:

  \begin{columns}[T]
  \begin{column}{.6\textwidth}
  \begin{itemize}
  \item  \textbf{TUBIT MSE API} \\ 
provides floor Information \\
no coordinates

  \item \textbf{Apple Indoor Framework} \\ 
Wifi Indoor signal strength \\
provides real coordinates, \\
no floor information \\ 


  
  \end{itemize}
  \end{column}
  \begin{column}{.4\textwidth}
  \includegraphics[scale=0.25]{applesignalgood}
  \end{column}
\end{columns}

\end{frame}



\begin{frame}{Indoor Positioning:~~~\raisebox{-10pt}[0pt][0pt]{\includegraphics[width=0.08\textwidth]{tech-stack-apple}}}

\framesubtitle{Subtitles can be in lowercase if they are full sentences.}
Automatic Pin Pointing:

  \begin{columns}[T]
  \begin{column}{.6\textwidth}
  \begin{itemize}
  

  \item  \textbf{ESTIMOTE Bluetooth} \\ 
  \item Ranges between 3-15m and 3-70m 
  \item Poor signal strength depending on battery level
  \item Beacon Position is roughly user position 
  \end{itemize}
  \end{column}
  \begin{column}{.4\textwidth}
  \includegraphics[scale=0.25]{beaconsonthemap}
  \end{column}
\end{columns}

\end{frame}


\begin{frame}{Indoor Positioning:~~~\raisebox{-10pt}[0pt][0pt]{\includegraphics[width=0.08\textwidth]{tech-stack-apple}}}

\framesubtitle{Subtitles can be in lowercase if they are full sentences.}
Automatic Pin Pointing:

  \begin{columns}[T]
  \begin{column}{.6\textwidth}
  \begin{itemize}
  

  \item  \textbf{ESTIMOTE Bluetooth} \\ 
  \item Ranges between 3-15m and 3-70m 
  \item Poor signal strength depending on battery level
  \item Beacon Position is roughly user position 
  \end{itemize}
  \end{column}
  \begin{column}{.4\textwidth}
  \includegraphics[scale=0.25]{mappinpointc}
  \end{column}
\end{columns}

\end{frame}





\begin{frame}{Indoor Positioning:~~~\raisebox{-10pt}[0pt][0pt]{\includegraphics[width=0.08\textwidth]{tech-stack-apple}}}

\framesubtitle{Subtitles can be in lowercase if they are full sentences.}
Manual Pin Pointing:

  \begin{columns}[T]
  \begin{column}{.6\textwidth}
  \begin{itemize}
 \item Offline Coordinates enables Manual Pin Pointing
 \item Outdoor Coordinates: 52.509690,13.325614
 \item Indoor Coordinates: 52.50956691014301, 13.32614194619497 
    
  \end{itemize}
  \end{column}
  \begin{column}{.4\textwidth}
  \includegraphics[scale=0.25]{mappinpointa}
  \end{column}
\end{columns}

\end{frame}

\begin{frame}{Indoor Positioning:~~~\raisebox{-10pt}[0pt][0pt]{\includegraphics[width=0.08\textwidth]{tech-stack-apple}}}

\framesubtitle{Subtitles can be in lowercase if they are full sentences.}
Manual Pin Pointing:

  \begin{columns}[T]
  \begin{column}{.6\textwidth}
  \begin{itemize}
 \item Offline Coordinates enables Manual Pin Pointing
 \item Outdoor Coordinates: 52.509690,13.325614
 \item Indoor Coordinates: 52.50956691014301, 13.32614194619497 
    
  \end{itemize}
  \end{column}
  \begin{column}{.4\textwidth}
  \includegraphics[scale=0.25]{mappinpointb}
  \end{column}
\end{columns}

\end{frame}

\begin{frame}{Indoor Positioning:~~~\raisebox{-10pt}[0pt][0pt]{\includegraphics[width=0.08\textwidth]{tech-stack-apple}}}

\framesubtitle{Subtitles can be in lowercase if they are full sentences.}
Manual Pin Pointing:

  \begin{columns}[T]
  \begin{column}{.6\textwidth}
  \begin{itemize}
 \item Offline Coordinates enables Manual Pin Pointing
 \item Most precise positioning technique
 \item Outdoor Coordinates: 52.509690,13.325614
 \item Indoor Coordinates: 52.50956691014301, 13.32614194619497 
    
  \end{itemize}
  \end{column}
  \begin{column}{.4\textwidth}
  \includegraphics[scale=0.25]{mappinpointd}
  \end{column}
\end{columns}

\end{frame}








\begin{frame}{Clients~~~\raisebox{-10pt}[0pt][0pt]{\includegraphics[width=0.08\textwidth]{tech-stack-android}}}

\begin{columns}[T]
	\begin{column}{.6\textwidth}
	\begin{itemize}
		\item Login in web view
		\item App don't handle user's credentials
	\end{itemize}
	\end{column}
	\begin{column}{.4\textwidth}
	\includegraphics[scale=0.27]{android_login}
	\end{column}
\end{columns}
\end{frame}

\begin{frame}{Clients~~~\raisebox{-10pt}[0pt][0pt]{\includegraphics[width=0.08\textwidth]{tech-stack-android}}}

\begin{columns}[T]
	\begin{column}{.6\textwidth}
	\begin{itemize}
		\item Add companion
		\item Accept companion request
		\item Manage groups
		\item Remove friends
	\end{itemize}
	\end{column}
	\begin{column}{.4\textwidth}
	\includegraphics[scale=0.27]{android_add_friend}
	\end{column}
\end{columns}
\end{frame}

\begin{frame}{Clients~~~\raisebox{-10pt}[0pt][0pt]{\includegraphics[width=0.08\textwidth]{tech-stack-android}}}

  \begin{itemize}
    \item Service scanning tubIt MSI API -> building name, floor
    \item Service scanning for nearby beacons -> beacon ID 
    \item User can pinpoint location on map
    \item Service updates user's location with most precise location info available \\(pinpointed coordinates > beacon ID > MSI info)
  \end{itemize}

\end{frame}

\begin{frame}{Clients~~~\raisebox{-10pt}[0pt][0pt]{\includegraphics[width=0.08\textwidth]{tech-stack-android}}}

\begin{columns}[T]
	\begin{column}{.6\textwidth}
	\begin{itemize}
		\item Friends shown on map
		\item Different floors
		\item Different markers for different accuracies 
	\end{itemize}
	\end{column}
	\begin{column}{.4\textwidth}
	\includegraphics[scale=0.27]{android_show_friends}
	\end{column}
\end{columns}
\end{frame}



\begin{frame}{Backend~~~\raisebox{-6pt}[0pt][0pt]{\includegraphics[width=0.08\textwidth]{tech-stack-backend}}}

  \begin{itemize}
    \item Flow image
    \item Federation Provider
    \item Docker
  \end{itemize}

\end{frame}

\begin{frame}{Backend~~~\raisebox{-6pt}[0pt][0pt]{\includegraphics[width=0.08\textwidth]{tech-stack-backend}}}

  \begin{center}
    \includegraphics[width=\textwidth]{architecture}
  \end{center}

\end{frame}

\begin{frame}{Experienced issues}

  \begin{itemize}
    \item Cisco MSE API is not fully implemented
    \item Bluetooth beacons have a limited range, especially when the battery gets low
    \item Cyclone had problems with the tubIT, therefore we also had problems
    %more problems that we should tell them?
  \end{itemize}
\end{frame}

\section{Demo}

\begin{frame}{}

  \begin{center}

    {\Huge DEMO TIME}

    \end{center}

\end{frame}

\begin{frame}{}

	\begin{center}

		{\Huge Do you have questions?}

    \end{center}

\end{frame}

\begin{frame}[allowframebreaks]{References}

	\nocite{*}
	{\tiny \bibliography{references}}


  {\tiny
    \begin{itemize}
      \item \url{http://developer.android.com/images/brand/Android_Robot_200.png}
      \item \url{https://upload.wikimedia.org/wikipedia/commons/thumb/f/fa/Apple_logo_black.svg/600px-Apple_logo_black.svg.png}
      \item \url{https://nodejs.org/en/about/resources/}
      \item \url{https://www.docker.com/brand-guidelines}
      \item \url{https://www.mongodb.com/brand-resources}
    \end{itemize}
  }
\end{frame}

\end{document}